在已开发完毕的各系统正式部署生产环境前要严格按照以下流程进行上线前检查。

# 一、提交测试

1. 开发人员在功能开发完毕之后首先配置**开发环境**，并将系统部署至开发环境。

   在开发环境下自测通过后提交测试代码，并开始撰写上线方案。

   > 上线方案需要包括
   >
   > - 外部应用程序安装，
   > - 应用程序部署顺序及应用关联性、是否关闭其它应用服务
   > - 数据库脚本
   > - 制定合理的上线时间
   > - 涉及的服务影响范围
   > - 上线失败的回滚步骤

   将上线方案提交给相关测试人员

2. 测试人员根据**模块功能**文档并**制定测试方案**，测试用例，特别注意临界点测试方案

3. 测试人员通过自动化部署平台根据上线方案进行**自动化部署**，涉及数据库操作可以提请 DBA 操作

4. 记录各种数据**测试结果**及测试问题，并交由相关开发人员进行二次迭代处理，同时交付测试结果报告。

5. 内测完成后交由相关业务及需求人员进行**集成测试**，并请测试人员记录测试结果及问题，交由相关开发人员进行再次迭代，同时交付测试方案测试结果报告。

# 二、预热发布

1. 测试人员在测试环境测试并跟踪修改 bug 达到上线标准时，开始部署预热环境，测试人员对现有功能在预热环境上进行验收测试。紧急 Bug 修改走补丁 / hotfix 流程，不影响功能的 bug 留到下版本解决，确认达到上线标准。
2. 如果达到了上线标准，测试人员发起邮件通知相关开发人员、产品人员，准备正式上线发布流程。

# 三、正式上线

1. 在测试人员确认项目具备上线条件下，正式上线前，开发负责人须发起部署大会，召集相关开发人员、测试人员、产品人员、运维人员讨论此次部署事项。

   > 部署事项：介绍项目的相应负责人员，数据库脚本执行，部署顺序，应用程序关联，部署时间点，部署回滚方案，包括数据库回滚和应用程序回滚

   最后生成会议纪要并发送邮件。

2. 确认上线之后，测试人员邮件上线方案，数据库脚本，应用分支号给运维人员及DBA，DBA应提前执行数据库脚本，应用部署须通过自动化部署平台进行部署，部署系统应在应用系统中记录当前分支号，以便后续应用回滚使用。

   在部署中出现错误，及时通知相关开发人员。如若问题不能在计划内时间解决，执行回滚方案。

3. 运维，DBA在操作完成时均需要回复邮件，并说明操作步骤结果。

4. 发布完成后运维人员回复邮件通知测试人员、业务及需求人员进行线上测试。测试结果及问题, 提交至开发人员。如若出现问题不能在计划内时间解决，执行回滚方案，并进行迭代改进。

5. （紧急Bug修改走补丁/hotfix流程。不影响功能的bug留到下次版本解决。）。测试通过后测试人员回复邮件，发布结束。

# 四、应用服务监控

1. 运维人员添加新增外部应用服务监控和新增云主机的系统监控
2. 运维人员对相关业务保持上线后正式生产系统进行有计划地监控其服务的性能和可用性，及时发现问题处理及反馈问题。

# 五、总结报告

上线成功后，撰写或总结系统需求、架构以及开发文档进行备案。

![img](..\img\项目上线流程.png)

