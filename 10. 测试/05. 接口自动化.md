# 概述

## 特点

- 低投入，高产出
- 比较容易实现自动化
- 和 UI 自动化测试想比更加稳定

## 提高 ROI

ROI 投递回报率，从两个方面入手

- 减少投入成本

  需要做到

  - 减少工具开发的成本

    尽可能的减少开发工具的时间、工具维护的时间，尽可能使用公司已有的，或是业界成熟的工具或组件。

  - 减少用例录入成本

    简化测试用例录入的成本，尽可能多的提示，如果可以，开发一些批量生成测试用例的工具。

  - 减少用例维护成本

    减少用例维护成本，尽量只用在页面上做简单的输入即可完成维护动作，而不是进行大量的代码操作。

  - 减少用例优化成本

    当团队做用例优化时，可以通过一些统计数据，进行有针对性、有目的性的用例优化。

- 增加使用率

  需要做到

  - 手工也能用

    不只是进行接口自动化测试，也可以完全用在手工测试上。

  - 人人能用

    每一个需要使用测试的人，包括一些非技术人员都可以使用。

  - 当工具用

    将一些接口用例当成工具使用，比如“生成订单”工具，“查找表单数据”工具。

  - 每天测试

    进行每日构建测试。

  - 开发的在构建之后也能触发测试

    开发将被测系统构建后，能自动触发接口自动化测试脚本，进行测试。

# 脚本设计

# 用例设计

我在做接口自动化设计的时候，会思考通用、校验、健壮、易用这几点。

## 通用

- 简单、方便
  - 用例数据与脚本分离，简单、方便
  - 免去上传脚本的动作，能避免很多不必要的错误和维护时间
  - 便于维护
- 模板化
  - 抽象出通用的模板，可快速扩展
  - 数据结构一致，便于批量操作
  - 专人维护，减少多团队间的重复开发工作
  - 由于使用了统一的模板，那各组之间便可交流、学习、做有效的对比分析
  - 如果以后这个平台不再使用，或者有更好的平台，可快速迁移
- 可统计，可扩展
  - 可统计、可开发工具；如：用例数统计，某服务下有多少条用例
  - 可开发用例维护工具
  - 可开发批量生成工具

## 校验

在写自动化脚本的时候，都会想“细致”，然后“写很多”的检查点；但当“校验点”多的时候，又会因为很多原因造成执行失败。所以我们的设计，需要在保证充足的检查点的情况下，还要尽可能减少误报。

- 充足的检查点
  - 可以检查出被测服务更多的缺陷
- 尽量少的误报
  - 可以减少很多的人工检查和维护的时间人力成本
- 还要
  - 简单、易读
  - 最好使用一些公式就能实现自己想要的验证
  - 通用、灵活、多样
  - 甚至可以用在其他项目的检查上，减少学习成本

## 健壮

执行测试的过程中，难免会报失败，执行失败可能的原因有很多，简单分为4类：

![img](..\img\c2e2a7e1.png)

- **被测系统出错**

  这部分其实是我们希望看到的，因为这说明我们的自动化测试真正地发现了一个Bug，用例发挥了它的价值，所以，这是我们希望看到的。

- **测试工具出错**

  这部分其实是我们不希望看到的，因为很大可能我们今天的自动化相当于白跑了。

- **测试数据错误**

  这是我们要避免的，既然数据容易失效，那我在设计测试平台的时候，就需要考虑如果将所有的数据跑“活”，而不是只写“死”。

- **不可抗力**

  这部分是我们也很无奈的，但是这样的情况很少发生。

那针对上面的情况

- **参数数据失效**
  - 支持实时去数据库查询。
  - 支持批量查。
- **IP进场发生变更**
  - 自动更新IP。
- **灵活、可复用**
  - 支持批量维护。
  - 接口测试执行前生成一些数据。
  - 接口执行完成后销毁一些数据。
  - 支持参数使用另一条测试用例的返回结果。
  - 支持一些请求参数实时生成，如token等数据，从而减少数据失效的问题。

## 易用

- **简单**
  - 功能强大，但要人人会用。
  - 非技术人员也要会用。
- **减少代码操作**
  - 让自动化开发人员注意力能更多的放在用例本身，而不是浪费在无关紧要的开发工作上面。
- **还要**
  - 配置能复用。
  - 通用、易学。
  - 一些数据能自动生成

