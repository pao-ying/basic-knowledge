# 常见的负载均衡算法

1. 轮询法

   将请求按顺序轮流地分配到后端服务器上，它均衡地对待后端的每一台服务器，而不关心服务器实际的连接数和当前的系统负载。

2. 随机法

   通过系统的随机算法，**根据后端服务器的列表大小值**来随机选取其中的一台服务器进行访问。由概率统计理论可以得知，随着客户端调用服务端的次数增多，

   其实际效果越来越接近于平均分配调用量到后端的每一台服务器，也就是轮询的结果。

3. 源地址哈希法

   源地址哈希的思想是根据**获取客户端的IP地址**，通过哈希函数计算得到的一个数值，用该数值对服务器列表的大小进行取模运算，得到的结果便是客服端要访问服务器的序号。采用源地址哈希法进行负载均衡，同一IP地址的客户端，**当后端服务器列表不变时，它每次都会映射到同一台后端服务器进行访问**。

4. 加权轮询法

   不同的后端服务器可能机器的配置和当前系统的负载并不相同，因此它们的抗压能力也不相同。给配置高、负载低的机器配置更高的权重，让其处理更多的请；而配置低、负载高的机器，给其分配较低的权重，降低其系统负载，加权轮询能很好地处理这一问题，并**将请求顺序且按照权重**分配到后端。

5. 加权随机法

   与加权轮询法一样，加权随机法也根据后端机器的配置，系统的负载分配不同的权重。不同的是，它是按照权重**随机请求后端服务器，而非顺序**。

6. 最小连接数法

   最小连接数算法比较灵活和智能，由于后端服务器的配置不尽相同，对于请求的处理有快有慢，它是根据后端服务器当前的连接情况，动态地选取其中当前

   积压连接数最少的一台服务器来处理当前的请求，尽可能地提高后端服务的利用效率，将负责合理地分流到每一台服务器。

# Nginx的5中负载均衡算法

1. 轮询（默认）

   每个请求按时间顺序逐一分配到不同的后端服务器，如果后端服务器down掉，能自动剔除。

2. weight

   指定轮询几率，weight和访问比率成正比，用于后端服务器性能不均的情况。

3. ip_hash

   每个请求按**访问ip的hash**结果分配，这样每个访客固定访问一个后端服务器，可以解决session的问题。

4. fair

   按后端服务器的**响应时间**来分配请求，响应时间短的优先分配。

5. url_hash

   按**访问url的hash**结果来分配请求，使**每个url定向到同一个后端服务器**，后端服务器为缓存时比较有效。

6. 

