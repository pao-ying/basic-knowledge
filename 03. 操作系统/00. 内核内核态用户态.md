# 系统调用

- 用户态：用户态运行的进程可以直接读取到用户程序的数据
- 内核态：内核态运行的进程可以访问计算机的任何资源，不受限制

由于一些底层操作，如拷贝设置页目录、页表等不能够交由用户线程完成，所以就产生了特权级别的概念。程序运行是在用户态，但在执行中一些需要内核权限的操作需要在内核态下完成，这时候就需要**从用户态转变到内核态**。

1. 发生系统调用时

   这是用户态主动请求切换到内核态的一种方式。系统调用的机制，核心是操作系统特地为用户开发的一种中断机制，即**软中断**。

2. 产生异常时

   CPU在执行用户态下的程序时，发生异常时，会将当前进行的进程转到**处理此异常的内核相关程序中**。如**缺页中断**。

3. 外设产生中断时

   当外设设备完成用户请求的操作后，会向CPU发出相应的中断信号。如硬盘读写操作完成后，系统会切换到**硬盘读写的中断程序中**执行后续操作。

# 内核

- 操作系统内核是操作系统的核心，负责系统的内存管理，硬件设备的管理，文件系统的管理以及应用程序的管理
- 同时是连接应用程序和硬件的桥梁，决定着操作系统的性能和稳定性。

# CPU

- CPU 是一台计算机的运算核心+控制核心
- 主要包括控制器和运算器
- 根本任务是执行指令

# CPU 与 内核

- 操作系统的内核属于操作系统层面的，而 CPU 属于硬件层面的
- CPU 主要提供运算，处理各种指令；内核主要负责系统管理，同时为应用屏蔽对硬件的操作。

![Kernel_Layout](..\img\Kernel_Layout.png)

