# 死锁是什么

多个进程竞争有限的资源，若一个线程没有可用资源，则进入等待状态。如果占用该资源的线程也再等待其它资源，依次反复形成循环等待，称为死锁。

# 死锁四个条件

- 互斥

  资源是非共享状态，一次只能分配给一个进程。其它进程只能等该进程释放资源后才能使用。

- 占有并等待

  一个线程占有一个资源，并且等待另一个资源，而该资源被另一个进程所占用

- 非抢占

  资源不能被抢占，只能在主动释放后才能被分配。

- 循环等待

  一组等待进程，前一个进程等待后一个进程释放资源，后一个期待它后一个释放，依次，最后一个期待第一个释放，形成循环等待。

# 死锁预防

- 破坏“互斥”

  资源是非共享的，使用资源转换技术将独占资源转换为共享资源

- 破坏“占有并等待”

  - 进程运行前一次分配所有要求的资源
  - 进程申请的资源得不到满足，就释放自己的所有资源

- 破坏“不可抢占”

  设立优先级

- 破坏“循环等待”

  将资源进行有序分配

# 死锁避免

**银行家算法**。基本思路：

进程在进入系统前，申明所需要的资源和其最大数目。在分配资源时，进行计算是否有足够资源分配给该进程和进一步计算分配之后是否会让系统处于不安全状态。

# 死锁检测和死锁避免

