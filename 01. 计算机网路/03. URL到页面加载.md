# 总体过程

1. DNS解析
2. TCP连接
3. 发送HTTP请求
4. 服务器处理请求并返回HTTP报文
5. 浏览器解析渲染页面
6. 连接结束

# DNS

DNS 协议就是用来将域名转换为 IP 地址, 也可以将 IP 地址转换为相应的域名.

DNS 服务器是基于 UDP 实现的, 服务器端口号为 **53**

## DNS 域名

![这里写图片描述](..\img\70fd)

## DNS 解析

1. 主机向本地域名服务器进行**递归查询**
2. 本地域名服务器采用**迭代查询**, 向根域名服务器进行查询
3. 根域名服务器返回顶级域名服务器 IP
4. 本地域名服务器向顶级域名服务器 IP 进行查询
5. 顶级域名服务器返回二级域名服务器 IP,
6. 以此类推, 知道得到想要的地址 IP 并返回给主机

### 递归查询

本机向本地域名服务器发出查询请求, 就等待查询结果. 如果本地域名服务器无法解析就会自己向其它 DNS 服务器发送查询, 知道得到结果告诉主机 IP 地址.

### 迭代查询

本地域名服务器向根域名服务器查询, 根域名服务器告诉本地域名服务器下一步往哪儿查询, 然后去查, 依次查询, 知道得到结果.

### 为什么使用 UDP

衡量计算机通信快慢的指标就是**响应时间**。

响应时间可以分为三部分：

> 响应时间=DNS域名解析时间+TCP连接建立时间+HTTP交易时间

TCP是固定的三次握手，HTTP是基于 Request/Response，这两者都很难缩短时间，所以只能让 DNS 域名解析时间越小越好。

又因为 DNS 采用迭代查询，需要频繁的与多个 DNS 服务器建立连接，所以采用 UDP，尽可能将数据报传输到对端，至于对端能不能接受到并不关心，可以提高相应速度。
