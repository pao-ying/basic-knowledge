# SSL连接

SSL全名`Secure Sockets Layer`，即安全套接层协议层。SSL协议指定了一种在应用程序协议（如http, telenet, nmtp和ftp等）和TCP/IP协议之间**提供数据安全性分层机制**。

# HTTP和HTTPS

- http使用端口是80，https使用的端口是443.
- http协议是运行在tcp协议之上，https是运行在TCP + SSL协议之上。
- http是进行明文传输的，而https会对传输的内容进行加密，并且可以互相验证身份。

```
SSL协议指定了一种在应用层协议，如http, telenet, nmtp, ftp等和TCP/IP协议之间提供数据安全性分层的机制。
```

# SSL/TLS协议

- 客户端发送请求
- 服务端将证书发给客户端
- 客户端会对证书进行检查，查看是否是可信任的机构颁布的，或者域名是否对等，是否过期等。如果证书没有问题，则客户端从证书中取出服务器的公钥，并对传输的数据进行加密。
- 服务端再使用私钥对传输的数据进行解密。

# 报文结构

## request

- 第一部分是**请求行**

  包含：请求方式、请求地址、请求协议

- 第二部分是**请求头部**

  ```
  User-Agent: ...
  Host: ...
  ```

- 第三部分是**请求体**，但只有POST请求有

## response

- **状态行**

  包含：协议、响应码（状态码）、状态码描述

- 响应头部

- **响应正文**

# HTTP工作流程

1. 地址解析

   通过标准的URL来请求指定服务器中指定的服务

2. 封装HTTP请求

   将URL和本机信息封装在HTTP请求包上

3. 封装TCP包

   封装TCP包,建立TCP连接

4. 客户端发送请求连接

5. 服务器端响应

6. 关闭连接
