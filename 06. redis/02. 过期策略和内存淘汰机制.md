# 过期策略

- 惰性删除

  只有在使用key时检查数据是否过期。对CPU友好，但是可能会产生大量过期的key没有删除。

- 定期删除

  每隔一段时间抽取**一部分**的key进行删除。并且redis会通过**限制删除时间和频率**来减少删除操作对CPU的影响。

定期删除对内存更加友好，惰性删除对CPU更加友好。redis采用**定期删除+惰性删除**策略。

但是仍然会漏掉很多过期的key，所以采用**redis内存淘汰机制**

# 内存淘汰机制

- volatile-lru

  从**设置过期时间**的数据集中删除最近最少使用的数据

- volatile-ttl

  从**设置过期时间**的数据集中删除即将要淘汰的

- volatile-lfu

  从**设置过期时间**的数据集中删除最近最不经常使用的数据

- allkeys-lru

  当**内存不足**时，删除最少使用的key

- allkeys-random

  当**内存不足**时，随机删除某个key

- allkeys-lfu

  当**内存不足**时，删除最近最不经常使用的数据

- no-eviction

  当**内存不足**时，写入操作会报错

