# 作用

网页 URL 去重，垃圾邮件识别，大集合重复元素的判断和缓冲穿透等。



## 简介

布隆过滤器本质是由长度为 m 的位向量或位列表（仅包含0或1位值的列表）组成，最初所有的值都设置为0.

将数据添加进布隆过滤器时，提供 k 个不同的哈希函数，并将结果位置上对应的值置为1.

当对值进行搜索时，使用 k 个哈希函数对 key 进行哈希运算，看是否对应的位置都为1，如果都为 1 表示可能存在，不都为1代表肯定不存在。

对于“可能存在”，布隆过滤器提供了一个误判率FFP:

![img](..\img\16eba609871807ab~tplv-t2oaga2asx-watermark.awebp)

- n 是已经添加元素的数量
- k 是哈希次数
- m 布隆过滤器的长度

# 应用

- 网页爬虫对 URL 去重，避免爬取相同的 URL 地址；

- 反垃圾邮件，从数十亿个垃圾邮件列表中判断某邮箱是否垃圾邮箱；

- Google Chrome 使用布隆过滤器识别恶意 URL；

- Medium 使用布隆过滤器避免推荐给用户已经读过的文章；

- Google BigTable，Apache HBbase 和 Apache Cassandra 使用布隆过滤器减少对不存在的行和列的查找。 除了上述的应用场景之外，布隆过滤器还有一个应用场景就是解决缓存穿透的问题。所谓的缓存穿透就是服务调用方每次都是查询不在缓存中的数据，这样每次服务调用都会到数据库中进行查询，如果这类请求比较多的话，就会导致数据库压力增大，这样缓存就失去了意义。

利用布隆过滤器我们可以预先把数据查询的主键，比如用户 ID 或文章 ID 缓存到过滤器中。当根据 ID 进行数据查询的时候，我们先判断该 ID 是否存在，若存在的话，则进行下一步处理。若不存在的话，直接返回，这样就不会触发后续的数据库查询。需要注意的是缓存穿透不能完全解决，我们只能将其控制在一个可以容忍的范围内。