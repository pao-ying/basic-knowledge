# 持久化机制

## 快照持久化RDB

redis将数据快照存放在磁盘上的二进制文件中 `dump.rdb`

可以在 `redis.conf`中配置**多久后至少多少个key发生变化时，创建快照**。

```
save 900 1
在900秒后，如果至少有1个key发生了改变，则会创建快照
```

## AOF

即**只追加文件机制**

开启AOF持久化之后，**每执行一条更改redis数据中的命令，都会写入 `server.aof_buf`内存缓存中**

然后再根据 **appendsync** 配置来决定何时同步到硬盘的 AOF 文件中。

AOF持久化技术有三种配置

- appendsync always

  每次有数据修改都写入aof

- appendsync everysec

  每秒钟同步一次

- appendsync no

  让操作系统决定

