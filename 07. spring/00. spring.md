# spring

Spring 是一款轻量级的 Java 开发框架，目的是简化企业应用程序的开发，是由核心容器、数据访问与集成、AOP、web、消息、测试六个模块组成。

- **Spring Core** 核心模块，Spring 其它所有功能都要基于该库，主要提供 **IOC** 依赖注入功能的支持。
- **Spring AOP** 提供了面向切面的编程实现
- **Spring Data Access/Integration**

  - **Spring-jdbc**：**提供了对数据库访问的抽象 JDBC**。不同数据库有自己独立的 API 进行操作，而 JAVA 程序只需要和 `JDBC API` 进行交互，屏蔽了数据库的影响。

  - **spring-tx**：提供对事务的支持

  - **spring-orm**：提供了对 **Hiberanate** 等 ORM 框架的支持

  - **spring-oxm**：提供对 **Castor** 等 OXM 框架的支持

  - **spring-jms**：Java 消息服务
- **Spring Web**
- **spring web**：对 web 功能的实现提供了一些最基础的支持
  - **spring-webmvc**：提供对 spring mvc 的实现
- **spring-websocket**：提供了对 websocket 的支持，websocket 可以让客户端
  - **spring-webflux**：提供对 webflux 的支持，与 springmvc 不同，它不需要 servlet API，是完全异步的
- **Spring Test**Spring 提倡测试驱动开发，有了控制反转 IOC ，单元测试和集成测试变得简单。

## 优点

- 方便解耦，简化开发 Spring就是一个大工厂，可以将所有对象的创建和依赖关系的维护交给Spring管理
- 方便集成各种框架 Spring可以整合很多框架，比如Mybatis
- 方便程序的测试 Spring支持JUnit4，可以通过注解很方便的测试Spring程序
- 支持AOP（面向切面编程） Spring提供了面向切面编程
- 声明式事务 只需要配置就可以完成对事务的管理，无需手动编程

## 需要导入的 jar

- Spring-core：包含Spring框架基本的核心工具类，Spring的其他组件都要用到这个包中的类，是其他组件的基本核心
- spring-beans：包含访问配置文件、创建和管理bean以及进行IOC或者DI操作相关的所有类
- Spring-context：Spring提供在基础IOC功能上的扩展服务，此外还提供许多企业级服务的支持，例如邮件服务、任务调度等
- Spring-expression：定义了Spring的表达式语句
- commons-logging：处理日志信息

# springboot

springboot 是 spring 框架的扩展，消除了 spring 应用程序所需的 xml 配置。

- 能够创建独立的 spring 引用
- 嵌入 tomcat 而不需要部署他们
- 提供 "starters" 来简化 maven 配置
- 尽可能的自动配置 spring 应用

## 配置分析

### maven

- Spring所需要的最小 maven 配置是 spring-web 和 spring-mvc
- SpringBoot 所需要的最小 maven 配置是 spring-boot-starter-web。**在进行构建期间，所有其他依赖项将自动添加到项目中**

### MVC配置

- `Spring`需要定义调度程序`servlet`，映射和其他支持配置。需要使用 `web.xml` 文件或`Initializer`类来完成此操作。还需要将`@EnableWebMvc`注释添加到`@Configuration`类，并定义一个视图解析器来解析从控制器返回的视图

- `SpringBoot`一旦我们添加了`Web`启动程序，`Spring Boot`只需要在`application`配置文件中配置几个属性来完成如上操作

  ```java
  spring.mvc.view.prefix=/WEB-INF/jsp/
  spring.mvc.view.suffix=.jsp
  ```

### 启动引导配置

`Spring`和`Spring Boot`中应用程序引导的基本区别在于`servlet`。

- `Spring`使用`web.xml` 或`SpringServletContainerInitializer`作为其引导入口点。

  **配置`web.xml`方法启动的步骤**

  - `Servlet`容器（服务器）读取`web.xml`
  - `web.xml`中定义的`DispatcherServlet`由容器实例化
  - `DispatcherServlet`通过读取`WEB-INF / {servletName} -servlet.xml`来创建`WebApplicationContext`。最后，`DispatcherServlet`注册在应用程序上下文中定义的`bean`

  **配置`Servlet 3+`方法启动步骤**

  容器搜索实现`ServletContainerInitializer`的类并执行`SpringServletContainerInitializer`找到实现所有类`WebApplicationInitializer``WebApplicationInitializer`创建具有XML或上下文`@Configuration`类`WebApplicationInitializer`创建`DispatcherServlet`与先前创建的上下文。

- `Spring Boot`仅使用`Servlet 3`功能来引导应用程序

  **Spring Boot应用程序的入口点是使用@SpringBootApplication注释的类**

  ```java
  @SpringBootApplication
  public class Application {
      public static void main(String[] args) {
          SpringApplication.run(Application.class, args);
      }
  }
  ```

  默认情况下，`Spring Boot`使用嵌入式容器来运行应用程序。在这种情况下，`Spring Boot`使用`public static void main`入口点来启动嵌入式`Web`服务器。此外，它还负责将`Servlet`，`Filter`和`ServletContextInitializer bean`从应用程序上下文绑定到嵌入式`servlet`容器。
   `Spring Boot`的另一个特性是它会自动扫描同一个包中的所有类或`Main`类的子包中的组件。

### 打包和部署

这两个框架都支持`Maven`和`Gradle`等通用包管理技术。但是在部署方面，这些框架差异很大。例如，[Spring Boot Maven插件](https://links.jianshu.com/go?to=https%3A%2F%2Fdocs.spring.io%2Fspring-boot%2Fdocs%2Fcurrent%2Fmaven-plugin%2F)在`Maven`中提供`Spring Boot`支持。它还允许打包可执行`jar`或`war`包并`就地`运行应用程序。

在部署环境中`Spring Boot` 对比`Spring`的一些优点包括：

- 提供嵌入式容器支持
- 使用命令*java -jar*独立运行jar
- 在外部容器中部署时，可以选择排除依赖关系以避免潜在的jar冲突
- 部署时灵活指定配置文件的选项
- 用于集成测试的随机端口生成

# 侵入性和非侵入性

https://blog.csdn.net/xiaoxiaodaxiake/article/details/90702335

主要是侵入性让用户代码产生对框架的依赖，这些代码不能在框架外使用，不利于代码的复用。但侵入性课可以使用户代码与框架更好的结合，更充分利用框架的优点。

非侵入代码没有过多依赖，可以很方便的迁移到其他地方，或者脱离框架。

