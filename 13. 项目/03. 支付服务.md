支付服务主要提供支付和退款功能。

支付：

1. 首先核对支付密码是否正确
2. 再核对余额是否充足
3. 如果上述都满足的情况下，就写入数据库
4. 如果上述哪部分发生异常，则将该支付写入MQ中，由MQ消费取消订单。

退款：

1. 首先是确认退款的金额和用户的金额，将数据写回数据库。
2. 调用班车服务的 `filterRepeatSeats` 方法退回座位
3. 修改订单状态为“关闭”